(()=>{"use strict";var e,t={337:(e,t,s)=>{var n=s(338);const r=window.React,a=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),l=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:c,iconNode:d,...m},h)=>(0,r.createElement)("svg",{ref:h,...i,width:t,height:t,stroke:e,strokeWidth:n?24*Number(s)/Number(t):s,className:o("lucide",a),...!c&&!l(m)&&{"aria-hidden":"true"},...m},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(c)?c:[c]])),d=(e,t)=>{const s=(0,r.forwardRef)(({className:s,...n},l)=>{return(0,r.createElement)(c,{ref:l,iconNode:t,className:o(`lucide-${i=a(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...n});var i});return s.displayName=a(e),s},m=d("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),h=d("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),x=d("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),g=window.ReactJSXRuntime,f=()=>{const[e,t]=(0,r.useState)({none:{name:"None",data:[]}}),[s,n]=(0,r.useState)("none"),[a,o]=(0,r.useState)("ready"),[l,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(0),[f,u]=(0,r.useState)(""),[p,w]=(0,r.useState)("normal"),[b,y]=(0,r.useState)(120),[v,j]=(0,r.useState)(0),[N,k]=(0,r.useState)(0);(0,r.useEffect)(()=>{(async()=>{try{const e=await fetch(window.typingGameAPI.categoriesUrl),s=await e.json(),n={none:{name:"None",data:[]}};for(const e of s)try{const t=await fetch(`${window.typingGameAPI.commandsBaseUrl}${e.slug}`),s=await t.json();n[e.slug]={name:e.name,data:s}}catch(t){console.error(`Error loading commands for ${e.slug}:`,t),n[e.slug]={name:e.name,data:[]}}t(n)}catch(e){console.error("Error loading categories:",e)}})()},[]);const S=(e="ready",t="none")=>{o(e),d(0),i([]),u(""),y(120),"ready"===e&&(j(0),k(0),n(t))},O=e=>{const t=[...e];for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t};(0,r.useEffect)(()=>{if(S("ready",s),"none"!==s&&e[s]?.data){const t=e[s].data,n=O(t);i(n)}},[s,e]);const C=l[c];console.log("shuffledList commands:",l.map(e=>`${e.command} - ${e.description}`)),console.log("currentWord",C),console.log("currentWordIndex",c);const E=C?.command||"",M=C?.description||"";return(0,r.useEffect)(()=>{if("playing"===a){const e=setInterval(()=>{y(e=>e<=1?(S("end"),0):e-1)},1e3);return()=>clearInterval(e)}},[a]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{className:"text-2xl font-bold mb-4",children:"プログラミングタイピングゲーム"}),(0,g.jsxs)("div",{className:"typing-game min-h-[60vh] border-2 border-gray-300 p-4 flex flex-col",children:[(0,g.jsx)("div",{className:"flex gap-2 flex-wrap mb-4",children:Object.entries(e).map(([e,t])=>{if("none"!==e)return(0,g.jsx)("button",{onClick:()=>n(e),className:"min-w-[100px] text-sm font-bold py-3 px-6 rounded-lg transition-colors duration-200 "+(s===e?"bg-green-500 text-white border-2 border-green-600":"bg-gray-200 text-gray-700 hover:bg-gray-300 hover:border-gray-400"),children:t.name},e)})}),(0,g.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,g.jsxs)("div",{className:"min-w-[200px] flex gap-2 items-center justify-start gap-2",children:[(0,g.jsx)("span",{className:"text-sm text-gray-500",children:"Score"}),(0,g.jsx)("span",{className:"font-bold text-2xl",children:v}),(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Miss"}),(0,g.jsx)("span",{className:"font-bold text-2xl",children:N})]}),(0,g.jsxs)("div",{className:"text-lg font-bold flex items-end justify-between gap-2",children:[(0,g.jsxs)("span",{className:"flex items-center gap-2",children:[(0,g.jsx)(m,{className:"inline-block w-5 h-5"})," Left Time"]}),(0,g.jsx)("span",{className:"text-2xl",children:b})]})]}),(0,g.jsxs)("div",{className:"flex-1 flex items-center justify-center",children:["ready"===a&&(0,g.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,g.jsx)("p",{className:"text-xl",children:"none"===s?"カテゴリーを選択してください":(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:"font-bold text-2xl",children:e[s]?.name}),"で開始します"]})}),(0,g.jsxs)("button",{onClick:()=>{if("none"!==s&&e[s]?.data.length){if(0===l.length){const t=e[s].data,n=O(t);i(n)}o("playing")}},className:"font-bold text-white py-4 px-8 rounded-lg transition-colors duration-200 flex items-center gap-2 mb-4\n                "+("none"!==s&&e[s]?.data.length?"bg-blue-500 hover:bg-blue-600":"bg-gray-200 hover:shadow-none cursor-not-allowed"),children:[(0,g.jsx)(h,{className:"w-5 h-5"}),"Start Game"]})]}),"playing"===a&&(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("div",{className:"text-md text-gray-500 tracking-widest mb-4 min-h-20 flex items-end",children:M}),C&&(0,g.jsx)("div",{className:"relative",children:(0,g.jsxs)("div",{className:"text-2xl p-4 border-2 rounded-lg w-full bg-white min-h-[60px] flex items-center\n                    focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-300\n                    "+("miss"===p?"focus-within:ring-red-300 focus-within:ring-3":"correct"===p?"focus-within:ring-green-300 focus-within:ring-3":""),tabIndex:0,onKeyDown:t=>{if(" "===t.key&&t.preventDefault(),t.key===E[f.length]){const n=f+t.key;if(u(n),j(e=>e+1),n.length===E.length&&(d(c+1),u(""),j(e=>e+5),w("correct"),setTimeout(()=>{w("normal")},500),c===l.length-1)){const t=e[s].data,n=O(t);i(e=>[...e,...n])}}else j(e=>Math.max(e-2,0)),k(e=>e+1),w("miss"),setTimeout(()=>{w("normal")},500)},children:[(0,g.jsx)("span",{className:"text-green-500 bg-green-50 px-1",children:f}),(0,g.jsx)("span",{className:"text-gray-500",children:E.slice(f.length)})]})})]}),"end"===a&&(0,g.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,g.jsxs)("span",{children:["Score  ",v]}),(0,g.jsxs)("span",{children:["Miss  ",N]})]}),(0,g.jsxs)("button",{onClick:()=>S(),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-8 rounded-lg transition-colors duration-200 flex items-center gap-2 mb-4",children:[(0,g.jsx)(x,{className:"w-5 h-5"}),"Retry Game"]})]})]})]})]})},u=document.getElementById("react-root");u&&(0,n.H)(u).render((0,g.jsx)(f,{}))},338:(e,t,s)=>{var n=s(795);t.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,s,r,a)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,r,a]=e[d],l=!0,i=0;i<s.length;i++)(!1&a||o>=a)&&Object.keys(n.O).every(e=>n.O[e](s[i]))?s.splice(i--,1):(l=!1,a<o&&(o=a));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,r,a]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var r,a,[o,l,i]=s,c=0;if(o.some(t=>0!==e[t])){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(i)var d=i(n)}for(t&&t(s);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},s=globalThis.webpackChunkwp_script_test=globalThis.webpackChunkwp_script_test||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var r=n.O(void 0,[350],()=>n(337));r=n.O(r)})();