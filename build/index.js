(()=>{"use strict";var e,t={337:(e,t,s)=>{var n=s(338);const a=window.React,r=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),l=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const i=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:d,...m},x)=>(0,a.createElement)("svg",{ref:x,...c,width:t,height:t,stroke:e,strokeWidth:n?24*Number(s)/Number(t):s,className:o("lucide",r),...!i&&!l(m)&&{"aria-hidden":"true"},...m},[...d.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(i)?i:[i]])),d=(e,t)=>{const s=(0,a.forwardRef)(({className:s,...n},l)=>{return(0,a.createElement)(i,{ref:l,iconNode:t,className:o(`lucide-${c=r(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...n});var c});return s.displayName=r(e),s},m=d("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),x=d("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),h=d("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),g=window.ReactJSXRuntime,u=()=>{const[e,t]=(0,a.useState)({none:{name:"None",data:[]}}),[s,n]=(0,a.useState)("none"),[r,o]=(0,a.useState)("ready"),[l,c]=(0,a.useState)([]),[i,d]=(0,a.useState)(0),[u,f]=(0,a.useState)(""),[p,b]=(0,a.useState)("normal"),[y,v]=(0,a.useState)(120),[j,w]=(0,a.useState)(0),[N,k]=(0,a.useState)(0);(0,a.useEffect)(()=>{(async()=>{try{const e=await fetch("/wp-json/typing-game/v1/categories"),s=await e.json(),n={none:{name:"None",data:[]}};for(const e of s)try{const t=await fetch(`/wp-json/typing-game/v1/commands/${e.slug}`),s=await t.json();n[e.slug]={name:e.name,data:s}}catch(t){console.error(`Error loading commands for ${e.slug}:`,t),n[e.slug]={name:e.name,data:[]}}t(n)}catch(e){console.error("Error loading categories:",e)}})()},[]);const S=(e="ready",t="none")=>{o(e),d(0),c([]),f(""),v(120),"ready"===e&&(w(0),k(0),n(t))},O=e=>{const t=[...e];for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t};(0,a.useEffect)(()=>{if(S("ready",s),"none"!==s&&e[s]?.data){const t=e[s].data,n=O(t);c(n)}},[s,e]);const C=l[i];console.log("shuffledList commands:",l.map(e=>`${e.command} - ${e.description}`)),console.log("currentWord",C),console.log("currentWordIndex",i);const E=C?.command||"",M=C?.description||"";return(0,a.useEffect)(()=>{if("playing"===r){const e=setInterval(()=>{v(e=>e<=1?(S("end"),0):e-1)},1e3);return()=>clearInterval(e)}},[r]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{className:"text-2xl font-bold mb-4",children:"プログラミングタイピングゲーム"}),(0,g.jsxs)("div",{className:"typing-game min-h-[60vh] border-2 border-gray-300 p-4 flex flex-col",children:[(0,g.jsx)("div",{className:"flex gap-2 mb-4",children:Object.entries(e).map(([e,t])=>{if("none"!==e)return(0,g.jsx)("button",{onClick:()=>n(e),className:"min-w-[100px] text-sm font-bold py-3 px-6 rounded-lg transition-colors duration-200 "+(s===e?"bg-green-500 text-white border-2 border-green-600":"bg-gray-200 text-gray-700 hover:bg-gray-300 hover:border-gray-400"),children:t.name},e)})}),(0,g.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,g.jsxs)("div",{className:"min-w-[200px] flex gap-2 items-center justify-start gap-2",children:[(0,g.jsx)("span",{className:"text-sm text-gray-500",children:"Score"}),(0,g.jsx)("span",{className:"font-bold text-2xl",children:j}),(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Miss"}),(0,g.jsx)("span",{className:"font-bold text-2xl",children:N})]}),(0,g.jsxs)("div",{className:"text-lg font-bold flex items-end justify-between gap-2",children:[(0,g.jsxs)("span",{className:"flex items-center gap-2",children:[(0,g.jsx)(m,{className:"inline-block w-5 h-5"})," Left Time"]}),(0,g.jsx)("span",{className:"text-2xl",children:y})]})]}),(0,g.jsxs)("div",{className:"flex-1 flex items-center justify-center",children:["ready"===r&&(0,g.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,g.jsx)("p",{className:"text-xl",children:"none"===s?"カテゴリーを選択してください":(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:"font-bold text-2xl",children:e[s]?.name}),"で開始します"]})}),(0,g.jsxs)("button",{onClick:()=>{if("none"!==s&&e[s]?.data.length){if(0===l.length){const t=e[s].data,n=O(t);c(n)}o("playing")}},className:"font-bold text-white py-4 px-8 rounded-lg transition-colors duration-200 flex items-center gap-2 mb-4\n                "+("none"!==s&&e[s]?.data.length?"bg-blue-500 hover:bg-blue-600":"bg-gray-200 hover:shadow-none cursor-not-allowed"),children:[(0,g.jsx)(x,{className:"w-5 h-5"}),"Start Game"]})]}),"playing"===r&&(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("div",{className:"text-md text-gray-500 tracking-widest mb-4 min-h-20 flex items-end",children:M}),C&&(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("input",{type:"text",className:"text-2xl p-4 border-2 rounded-lg w-full bg-transparent text-transparent\n                    focus:outline-none focus:ring-2 focus:ring-blue-300\n                    "+("miss"===p?"focus:ring-red-300 focus:ring-3":"correct"===p?"focus:ring-green-300 focus:ring-3":""),onKeyDown:t=>{if(" "===t.key&&t.preventDefault(),t.key===E[u.length]){const n=u+t.key;if(f(n),w(e=>e+1),n.length===E.length&&(d(i+1),f(""),w(e=>e+5),b("correct"),setTimeout(()=>{b("normal")},500),i===l.length-1)){const t=e[s].data,n=O(t);c(e=>[...e,...n])}}else w(e=>Math.max(e-2,0)),k(e=>e+1),b("miss"),setTimeout(()=>{b("normal")},500)},autoFocus:!0,readOnly:!0}),(0,g.jsxs)("div",{className:"absolute inset-0 text-2xl p-4 tracking-widest pointer-events-none",children:[(0,g.jsx)("span",{className:"text-green-500 bg-green-50 pl-1",children:u}),(0,g.jsx)("span",{className:"text-gray-500",children:E.slice(u.length)})]})]})]}),"end"===r&&(0,g.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,g.jsxs)("span",{children:["Score  ",j]}),(0,g.jsxs)("span",{children:["Miss  ",N]})]}),(0,g.jsxs)("button",{onClick:()=>S(),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-8 rounded-lg transition-colors duration-200 flex items-center gap-2 mb-4",children:[(0,g.jsx)(h,{className:"w-5 h-5"}),"Retry Game"]})]})]})]})]})},f=document.getElementById("react-root");f&&(0,n.H)(f).render((0,g.jsx)(u,{}))},338:(e,t,s)=>{var n=s(795);t.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},s={};function n(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,s,a,r)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,a,r]=e[d],l=!0,c=0;c<s.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every(e=>n.O[e](s[c]))?s.splice(c--,1):(l=!1,r<o&&(o=r));if(l){e.splice(d--,1);var i=a();void 0!==i&&(t=i)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,a,r]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var a,r,[o,l,c]=s,i=0;if(o.some(t=>0!==e[t])){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(c)var d=c(n)}for(t&&t(s);i<o.length;i++)r=o[i],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},s=globalThis.webpackChunkwp_script_test=globalThis.webpackChunkwp_script_test||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=n.O(void 0,[350],()=>n(337));a=n.O(a)})();